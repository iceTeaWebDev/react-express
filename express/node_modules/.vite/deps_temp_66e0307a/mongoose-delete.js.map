{
  "version": 3,
  "sources": ["../../mongoose-delete/index.js"],
  "sourcesContent": ["var mongoose = require('mongoose'),\r\n    Schema = mongoose.Schema,\r\n    Model = mongoose.Model,\r\n    util = require('util');\r\n\r\n/**\r\n * This code is taken from official mongoose repository\r\n * https://github.com/Automattic/mongoose/blob/master/lib/query.js#L3847-L3873\r\n */\r\nfunction parseUpdateArguments (conditions, doc, options, callback) {\r\n    if ('function' === typeof options) {\r\n        // .update(conditions, doc, callback)\r\n        callback = options;\r\n        options = null;\r\n    } else if ('function' === typeof doc) {\r\n        // .update(doc, callback);\r\n        callback = doc;\r\n        doc = conditions;\r\n        conditions = {};\r\n        options = null;\r\n    } else if ('function' === typeof conditions) {\r\n        // .update(callback)\r\n        callback = conditions;\r\n        conditions = undefined;\r\n        doc = undefined;\r\n        options = undefined;\r\n    } else if (typeof conditions === 'object' && !doc && !options && !callback) {\r\n        // .update(doc)\r\n        doc = conditions;\r\n        conditions = undefined;\r\n        options = undefined;\r\n        callback = undefined;\r\n    }\r\n\r\n    var args = [];\r\n\r\n    if (conditions) args.push(conditions);\r\n    if (doc) args.push(doc);\r\n    if (options) args.push(options);\r\n    if (callback) args.push(callback);\r\n\r\n    return args;\r\n}\r\n\r\nfunction parseIndexFields (options) {\r\n    var indexFields = {\r\n        deleted: false,\r\n        deletedAt: false,\r\n        deletedBy: false\r\n    };\r\n\r\n    if (!options.indexFields) {\r\n        return indexFields;\r\n    }\r\n\r\n    if ((typeof options.indexFields === 'string' || options.indexFields instanceof String) && options.indexFields === 'all') {\r\n        indexFields.deleted = indexFields.deletedAt = indexFields.deletedBy = true;\r\n    }\r\n\r\n    if (typeof(options.indexFields) === \"boolean\" && options.indexFields === true) {\r\n        indexFields.deleted = indexFields.deletedAt = indexFields.deletedBy = true;\r\n    }\r\n\r\n    if (Array.isArray(options.indexFields)) {\r\n        indexFields.deleted = options.indexFields.indexOf('deleted') > -1;\r\n        indexFields.deletedAt = options.indexFields.indexOf('deletedAt') > -1;\r\n        indexFields.deletedBy = options.indexFields.indexOf('deletedBy') > -1;\r\n    }\r\n\r\n    return indexFields;\r\n}\r\n\r\nfunction createSchemaObject (typeKey, typeValue, options) {\r\n    options[typeKey] = typeValue;\r\n    return options;\r\n}\r\n\r\nmodule.exports = function (schema, options) {\r\n    options = options || {};\r\n    var indexFields = parseIndexFields(options);\r\n\r\n    var typeKey = schema.options.typeKey;\r\n    var mongooseMajorVersion = +mongoose.version[0]; // 4, 5...\r\n    var mainUpdateMethod = mongooseMajorVersion < 5 ? 'update' : 'updateMany';\r\n    var mainUpdateWithDeletedMethod = mainUpdateMethod + 'WithDeleted';\r\n\r\n    function updateDocumentsByQuery(schema, conditions, updateQuery, callback) {\r\n        if (schema[mainUpdateWithDeletedMethod]) {\r\n            return schema[mainUpdateWithDeletedMethod](conditions, updateQuery, { multi: true }, callback);\r\n        } else {\r\n            return schema[mainUpdateMethod](conditions, updateQuery, { multi: true }, callback);\r\n        }\r\n    }\r\n\r\n    schema.add({ deleted: createSchemaObject(typeKey, Boolean, { default: false, index: indexFields.deleted }) });\r\n\r\n    if (options.deletedAt === true) {\r\n        schema.add({ deletedAt: createSchemaObject(typeKey, Date, { index: indexFields.deletedAt }) });\r\n    }\r\n\r\n    if (options.deletedBy === true) {\r\n        schema.add({ deletedBy: createSchemaObject(typeKey, options.deletedByType || Schema.Types.ObjectId, { index: indexFields.deletedBy }) });\r\n    }\r\n\r\n    var use$neOperator = true;\r\n    if (options.use$neOperator !== undefined && typeof options.use$neOperator === \"boolean\") {\r\n        use$neOperator = options.use$neOperator;\r\n    }\r\n\r\n    schema.pre('save', function (next) {\r\n        if (!this.deleted) {\r\n            this.deleted = false;\r\n        }\r\n        next();\r\n    });\r\n\r\n    if (options.overrideMethods) {\r\n        var overrideItems = options.overrideMethods;\r\n        var overridableMethods = ['count', 'countDocuments', 'find', 'findOne', 'findOneAndUpdate', 'update', 'updateOne', 'updateMany', 'aggregate'];\r\n        var finalList = [];\r\n\r\n        if ((typeof overrideItems === 'string' || overrideItems instanceof String) && overrideItems === 'all') {\r\n            finalList = overridableMethods;\r\n        }\r\n\r\n        if (typeof(overrideItems) === \"boolean\" && overrideItems === true) {\r\n            finalList = overridableMethods;\r\n        }\r\n\r\n        if (Array.isArray(overrideItems)) {\r\n            overrideItems.forEach(function(method) {\r\n                if (overridableMethods.indexOf(method) > -1) {\r\n                    finalList.push(method);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (finalList.indexOf('aggregate') > -1) {\r\n            schema.pre('aggregate', function() {\r\n                var firsMatchStr = JSON.stringify(this.pipeline()[0]);\r\n\r\n                if ( firsMatchStr !== '{\"$match\":{\"deleted\":{\"$ne\":false}}}' ) {\r\n                    if (firsMatchStr === '{\"$match\":{\"showAllDocuments\":\"true\"}}') {\r\n                        this.pipeline().shift();\r\n                    } else {\r\n                        this.pipeline().unshift({ $match: { deleted: { '$ne': true } } });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        finalList.forEach(function(method) {\r\n            if (['count', 'countDocuments', 'find', 'findOne'].indexOf(method) > -1) {\r\n                var modelMethodName = method;\r\n\r\n                // countDocuments do not exist in Mongoose v4\r\n                /* istanbul ignore next */\r\n                if (mongooseMajorVersion < 5 && method === 'countDocuments' && typeof Model.countDocuments !== 'function') {\r\n                    modelMethodName = 'count';\r\n                }\r\n\r\n                schema.statics[method] = function () {\r\n                    var query = Model[modelMethodName].apply(this, arguments);\r\n                    if (!arguments[2] || arguments[2].withDeleted !== true) {\r\n                        if (use$neOperator) {\r\n                            query.where('deleted').ne(true);\r\n                        } else {\r\n                            query.where({deleted: false});\r\n                        }\r\n                    }\r\n                    return query;\r\n                };\r\n                schema.statics[method + 'Deleted'] = function () {\r\n                    if (use$neOperator) {\r\n                        return Model[modelMethodName].apply(this, arguments).where('deleted').ne(false);\r\n                    } else {\r\n                        return Model[modelMethodName].apply(this, arguments).where({deleted: true});\r\n                    }\r\n                };\r\n                schema.statics[method + 'WithDeleted'] = function () {\r\n                    return Model[modelMethodName].apply(this, arguments);\r\n                };\r\n            } else {\r\n                if (method === 'aggregate') {\r\n                    schema.statics[method + 'Deleted'] = function () {\r\n                        var args = [];\r\n                        Array.prototype.push.apply(args, arguments);\r\n                        var match = { $match : { deleted : {'$ne': false } } };\r\n                        arguments.length ? args[0].unshift(match) : args.push([match]);\r\n                        return Model[method].apply(this, args);\r\n                    };\r\n\r\n                    schema.statics[method + 'WithDeleted'] = function () {\r\n                        var args = [];\r\n                        Array.prototype.push.apply(args, arguments);\r\n                        var match = { $match : { showAllDocuments : 'true' } };\r\n                        arguments.length ? args[0].unshift(match) : args.push([match]);\r\n                        return Model[method].apply(this, args);\r\n                    };\r\n                } else {\r\n                    schema.statics[method] = function () {\r\n                        var args = parseUpdateArguments.apply(undefined, arguments);\r\n\r\n                        if (use$neOperator) {\r\n                            args[0].deleted = {'$ne': true};\r\n                        } else {\r\n                            args[0].deleted = false;\r\n                        }\r\n\r\n                        return Model[method].apply(this, args);\r\n                    };\r\n\r\n                    schema.statics[method + 'Deleted'] = function () {\r\n                        var args = parseUpdateArguments.apply(undefined, arguments);\r\n\r\n                        if (use$neOperator) {\r\n                            args[0].deleted = {'$ne': false};\r\n                        } else {\r\n                            args[0].deleted = true;\r\n                        }\r\n\r\n                        return Model[method].apply(this, args);\r\n                    };\r\n\r\n                    schema.statics[method + 'WithDeleted'] = function () {\r\n                        return Model[method].apply(this, arguments);\r\n                    };\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    schema.methods.delete = function (deletedBy, cb) {\r\n        if (typeof deletedBy === 'function') {\r\n          cb = deletedBy;\r\n          deletedBy = null;\r\n        }\r\n\r\n        this.deleted = true;\r\n\r\n        if (schema.path('deletedAt')) {\r\n            this.deletedAt = new Date();\r\n        }\r\n\r\n        if (schema.path('deletedBy')) {\r\n            this.deletedBy = deletedBy;\r\n        }\r\n\r\n        if (options.validateBeforeDelete === false) {\r\n            return this.save({ validateBeforeSave: false }, cb);\r\n        }\r\n\r\n        return this.save(cb);\r\n    };\r\n\r\n    schema.statics.delete =  function (conditions, deletedBy, callback) {\r\n        if (typeof deletedBy === 'function') {\r\n            callback = deletedBy;\r\n            conditions = conditions;\r\n            deletedBy = null;\r\n        } else if (typeof conditions === 'function') {\r\n            callback = conditions;\r\n            conditions = {};\r\n            deletedBy = null;\r\n        }\r\n\r\n        var doc = {\r\n            deleted: true\r\n        };\r\n\r\n        if (schema.path('deletedAt')) {\r\n            doc.deletedAt = new Date();\r\n        }\r\n\r\n        if (schema.path('deletedBy')) {\r\n            doc.deletedBy = deletedBy;\r\n        }\r\n\r\n        return updateDocumentsByQuery(this, conditions, doc, callback);\r\n    };\r\n\r\n    schema.statics.deleteById =  function (id, deletedBy, callback) {\r\n        if (arguments.length === 0 || typeof id === 'function') {\r\n            var msg = 'First argument is mandatory and must not be a function.';\r\n            throw new TypeError(msg);\r\n        }\r\n\r\n        var conditions = {\r\n            _id: id\r\n        };\r\n\r\n        return this.delete(conditions, deletedBy, callback);\r\n    };\r\n\r\n    schema.methods.restore = function (callback) {\r\n        this.deleted = false;\r\n        this.deletedAt = undefined;\r\n        this.deletedBy = undefined;\r\n        return this.save(callback);\r\n    };\r\n\r\n    schema.statics.restore =  function (conditions, callback) {\r\n        if (typeof conditions === 'function') {\r\n            callback = conditions;\r\n            conditions = {};\r\n        }\r\n\r\n        var doc = {\r\n            deleted: false,\r\n            deletedAt: undefined,\r\n            deletedBy: undefined\r\n        };\r\n\r\n        return updateDocumentsByQuery(this, conditions, doc, callback);\r\n    };\r\n};\r\n"],
  "mappings": "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",
  "names": ["schema"]
}
